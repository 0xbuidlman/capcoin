#!/usr/bin/env node
'use strict';

// MEAN CLI.
var program = require('commander'),
  _ = require('lodash');

// set program version
var version = require('../package').version;
program.version(version, '-v, --version');

program
  .description('Capcoin - A explorer for Coincap.io')
  .command('changelog', 'Show latest changes')
  .command('charts', 'history as charts')
  .command('coins', 'All supported coins')
  .command('front', 'Front Page Data of current coin stats')
  .command('history', 'history')
  .command('live', 'Live trades and global data')
  .command('global', 'Global data')
  .command('page', 'Front Page Data of current coin stats')
  .command('map', 'JSON object of Coin symbols/names and known aliases')
  .parse(process.argv);

// print help with no args
if (program.args.length < 1) {
  program.help();
}

// if there is a command, make sure it's valid
var commands = program.commands.map(function(command) {
  return command._name;
});

if (!commands.includes(program.args[0])) {
  console.log('mean: `' + program.rawArgs[2] + '` is not a capcoin command. See `mean --help`.');
  console.log();
  process.exit(1);
}
